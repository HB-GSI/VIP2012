CREATE TABLE VIP2012_CLASSES
(
  ID        INTEGER			NOT NULL,
  NAME      VARCHAR2(255 CHAR)		NOT NULL,
  PATH      VARCHAR2(1024 CHAR)		NOT NULL,
  ANCESTOR  INTEGER
);

ALTER TABLE VIP2012_CLASSES ADD (
  PRIMARY KEY
  (ID)
  USING INDEX
  ENABLE VALIDATE);

ALTER TABLE VIP2012_CLASSES ADD (
  FOREIGN KEY (ANCESTOR) 
  REFERENCES VIP2012_CLASSES (ID)
  ENABLE VALIDATE);


CREATE TABLE VIP2012_SECTIONS
(
  ID          INTEGER			NOT NULL,
  NAME        VARCHAR2(255 CHAR)	NOT NULL,
  FK_CLASSES  INTEGER			NOT NULL
);

ALTER TABLE VIP2012_SECTIONS ADD (
  PRIMARY KEY
  (ID)
  USING INDEX
  ENABLE VALIDATE);

ALTER TABLE VIP2012_SECTIONS ADD (
  FOREIGN KEY (FK_CLASSES) 
  REFERENCES VIP2012_CLASSES (ID)
  ENABLE VALIDATE);


CREATE TABLE VIP2012_ITEMS
(
  ID            INTEGER			NOT NULL,
  NAME          VARCHAR2(255 CHAR)	NOT NULL,
  FK_CLASSES    INTEGER			NOT NULL,
  FK_BASECLASS  INTEGER			NOT NULL
);

ALTER TABLE VIP2012_ITEMS ADD (
  PRIMARY KEY
  (ID)
  USING INDEX
  ENABLE VALIDATE,
  UNIQUE (FK_BASECLASS, NAME)
  USING INDEX
  ENABLE VALIDATE);

ALTER TABLE VIP2012_ITEMS ADD (
  FOREIGN KEY (FK_CLASSES) 
  REFERENCES VIP2012_CLASSES (ID)
  ENABLE VALIDATE,
  FOREIGN KEY (FK_BASECLASS) 
  REFERENCES VIP2012_CLASSES (ID)
  ENABLE VALIDATE);


CREATE TABLE VIP2012_ITEMVALUES
(
  ID           INTEGER			NOT NULL,
  FK_SECTIONS  INTEGER			NOT NULL,
  FK_ITEMS     INTEGER  		NOT NULL,
  DATA         VARCHAR2(1024 CHAR)
);

ALTER TABLE VIP2012_ITEMVALUES ADD (
  PRIMARY KEY
  (ID)
  USING INDEX
  ENABLE VALIDATE,
  UNIQUE (FK_SECTIONS, FK_ITEMS)
  USING INDEX
  ENABLE VALIDATE);

ALTER TABLE VIP2012_ITEMVALUES ADD (
  FOREIGN KEY (FK_SECTIONS) 
  REFERENCES VIP2012_SECTIONS (ID)
  ENABLE VALIDATE,
  FOREIGN KEY (FK_ITEMS) 
  REFERENCES VIP2012_ITEMS (ID)
  ENABLE VALIDATE);


-- DROP TABLE VIP2012_ITEMVALUES
-- DROP TABLE VIP2012_ITEMS
-- DROP TABLE VIP2012_SECTIONS
-- DROP TABLE VIP2012_CLASSES
